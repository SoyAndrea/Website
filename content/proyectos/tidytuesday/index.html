---
title: "Mis primeros pasos en #tidytuesday"
author: "Andrea"
date: '2023-04-25T21:13:14-05:00'

categories: R
tags:
- R
- tidytuesday
---

<script src="{{< blogdown/postref >}}index_files/htmlwidgets/htmlwidgets.js"></script>
<script src="{{< blogdown/postref >}}index_files/plotly-binding/plotly.js"></script>
<script src="{{< blogdown/postref >}}index_files/typedarray/typedarray.min.js"></script>
<script src="{{< blogdown/postref >}}index_files/jquery/jquery.min.js"></script>
<link href="{{< blogdown/postref >}}index_files/crosstalk/css/crosstalk.min.css" rel="stylesheet" />
<script src="{{< blogdown/postref >}}index_files/crosstalk/js/crosstalk.min.js"></script>
<link href="{{< blogdown/postref >}}index_files/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="{{< blogdown/postref >}}index_files/plotly-main/plotly-latest.min.js"></script>


<div id="r4ds---r-para-ciencia-de-datos" class="section level2">
<h2>R4DS - R para Ciencia de Datos</h2>
<p><img style="float: left;" src="https://user-images.githubusercontent.com/29187501/38734884-c31c6c30-3eec-11e8-966b-17172b21a279.png" alt="R4DS hex" width="30%"/></p>
<p><a href="https://rfordatasci.com/"><strong>R4DS</strong></a> es una comunidad de aprendices de R de todos los niveles que trabajan juntos para mejorar sus habilidades en ciencia de datos. Y dentro de las actividades de la comunidad es tidytuesday, que es un proyecto semanal de datos sociales. Todos están invitados a participar y se invita a compartir el código utilizado para generar los resultados.</p>
<p>Acá puedes conocer el <a href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2023/2023-04-25/readme.md">repositorio del proyecto con la actividad de cada semana y participar!</a></p>
<p><br></p>
</div>
<div id="semana-elegida-tidytuesday-week-17---2023-london-marathon-running" class="section level2">
<h2>Semana elegida <code>{tidytuesday}</code>: <strong>Week 17 - 2023: London Marathon</strong> :running:</h2>
<div id="mis-paquetes-a-utilizar" class="section level4">
<h4>mis paquetes a utilizar</h4>
<pre class="r"><code>library(tidyverse) # manipulación del dato
library(plotly) # gráfico interactivo
library(tidytuesdayR) # obtengo dataset</code></pre>
</div>
<div id="dataset-elegido" class="section level4">
<h4>dataset elegido</h4>
<pre class="r"><code>tuesdata &lt;- tidytuesdayR::tt_load(&#39;2023-04-25&#39;)</code></pre>
<pre><code>## 
## 	Downloading file 1 of 2: `winners.csv`
## 	Downloading file 2 of 2: `london_marathon.csv`</code></pre>
<pre class="r"><code>winners &lt;- tuesdata$winners</code></pre>
</div>
</div>
<div id="mi-primer-gráfico" class="section level2">
<h2>mi primer gráfico</h2>
<div id="en-plotly" class="section level3">
<h3>En <code>{plotly}</code></h3>
<pre class="r"><code>count(winners, Nationality, Category) %&gt;%   
    plot_ly(x=~Nationality, y=~n,  type = &#39;bar&#39;)</code></pre>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-1" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"visdat":{"5a4014ea142f":["function () ","plotlyVisDat"]},"cur_data":"5a4014ea142f","attrs":{"5a4014ea142f":{"x":{},"y":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"Nationality","type":"category","categoryorder":"array","categoryarray":["Australia","Belgium","Canada","China","Denmark","Ethiopia","France","Germany","Ireland","Italy","Japan","Kenya","Mexico","Morocco","Netherlands","Norway","Poland","Portugal","Soviet Union","Spain","Sweden","Switzerland","United Kingdom","United States"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"n"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["Australia","Australia","Belgium","Canada","China","Denmark","Denmark","Ethiopia","Ethiopia","France","Germany","Ireland","Ireland","Ireland","Italy","Japan","Japan","Kenya","Kenya","Mexico","Mexico","Morocco","Netherlands","Norway","Norway","Poland","Portugal","Portugal","Soviet Union","Spain","Sweden","Sweden","Switzerland","Switzerland","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United States","United States","United States","United States"],"y":[2,1,1,4,1,1,2,5,4,3,5,2,3,1,4,2,1,16,14,3,2,2,1,1,6,2,3,1,1,1,1,2,6,4,6,16,15,7,2,2,6,1],"type":"bar","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="sumo-paleta-de-colores" class="section level3">
<h3>Sumo paleta de colores</h3>
<pre class="r"><code>palet  &lt;- c(&quot;#f18701&quot;, &quot;#f7b801&quot;, &quot;#7678ed&quot;, &quot;#3d348b&quot;)</code></pre>
</div>
<div id="ordeno-categorias-y-adecuo-paleta-de-colores" class="section level3">
<h3>Ordeno categorias y adecuo paleta de colores</h3>
<pre class="r"><code>count(winners, Nationality, Category) %&gt;%   
    plot_ly(x=~Nationality, y=~n,  type = &#39;bar&#39;, 
                  color = ~Category, colors = palet) %&gt;% 
  layout(
    title =  &quot;Winners of London marathon by Nationality in each category from 1981 - 2022&quot;,
              yaxis = list(title = &#39;Number of winners&#39;, range= c(0,45)), 
              xaxis = list(title = &#39;Nationality&#39;, categoryorder = &quot;total descending&quot;,
                           tickangle = -45),
              barmode = &quot;stack&quot;,bargap = 2, plot_bgcolor=&#39;white&#39;)</code></pre>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-2" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"visdat":{"5a404d8a2a93":["function () ","plotlyVisDat"]},"cur_data":"5a404d8a2a93","attrs":{"5a404d8a2a93":{"x":{},"y":{},"color":{},"colors":["#f18701","#f7b801","#7678ed","#3d348b"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Winners of London marathon by Nationality in each category from 1981 - 2022","yaxis":{"domain":[0,1],"automargin":true,"title":"Number of winners","range":[0,45]},"xaxis":{"domain":[0,1],"automargin":true,"title":"Nationality","categoryorder":"total descending","tickangle":-45,"type":"category","categoryarray":["Australia","Belgium","Canada","China","Denmark","Ethiopia","France","Germany","Ireland","Italy","Japan","Kenya","Mexico","Morocco","Netherlands","Norway","Poland","Portugal","Soviet Union","Spain","Sweden","Switzerland","United Kingdom","United States"]},"barmode":"stack","bargap":2,"plot_bgcolor":"white","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["Denmark","Ethiopia","Japan","Kenya","Mexico","Morocco","Norway","Portugal","Soviet Union","Spain","United Kingdom","United States"],"y":[1,5,2,16,3,2,1,3,1,1,6,2],"type":"bar","name":"Men","marker":{"color":"rgba(241,135,1,1)","line":{"color":"rgba(241,135,1,1)"}},"textfont":{"color":"rgba(241,135,1,1)"},"error_y":{"color":"rgba(241,135,1,1)"},"error_x":{"color":"rgba(241,135,1,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Australia","Belgium","Canada","France","Ireland","Mexico","Sweden","Switzerland","United Kingdom","United States"],"y":[2,1,4,3,2,2,1,6,16,2],"type":"bar","name":"Wheelchair Men","marker":{"color":"rgba(247,184,1,1)","line":{"color":"rgba(247,184,1,1)"}},"textfont":{"color":"rgba(247,184,1,1)"},"error_y":{"color":"rgba(247,184,1,1)"},"error_x":{"color":"rgba(247,184,1,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Australia","Denmark","Ireland","Italy","Japan","Netherlands","Sweden","Switzerland","United Kingdom","United States"],"y":[1,2,3,4,1,1,2,4,15,6],"type":"bar","name":"Wheelchair Women","marker":{"color":"rgba(118,120,237,1)","line":{"color":"rgba(118,120,237,1)"}},"textfont":{"color":"rgba(118,120,237,1)"},"error_y":{"color":"rgba(118,120,237,1)"},"error_x":{"color":"rgba(118,120,237,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["China","Ethiopia","Germany","Ireland","Kenya","Norway","Poland","Portugal","United Kingdom","United States"],"y":[1,4,5,1,14,6,2,1,7,1],"type":"bar","name":"Women","marker":{"color":"rgba(61,52,139,1)","line":{"color":"rgba(61,52,139,1)"}},"textfont":{"color":"rgba(61,52,139,1)"},"error_y":{"color":"rgba(61,52,139,1)"},"error_x":{"color":"rgba(61,52,139,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="ggplot2" class="section level3">
<h3><code>{ggplot2}</code></h3>
<pre class="r"><code>ggplot(winners, aes(x=fct_rev(fct_infreq(Nationality)))) +
  geom_bar() +
  coord_flip()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Mejoro colores y formato</p>
<pre class="r"><code>ggplot(winners, aes(x=fct_rev(fct_infreq(Nationality)))) +
  geom_bar(aes(fill = Category)) +
  coord_flip() +
  scale_fill_manual(values = c(&quot;#186F65&quot;, &quot;#B5CB99&quot;, &quot;#D988B9&quot;, &quot;#B0578D&quot;)) +
  labs(
    y = &#39;Number of winners&#39;,
    x = &#39;Nationality&#39;,
    title = &quot;Winners of London marathon by Nationality in each category&quot;,
    subtitle = &quot;from 1981 - 2022&quot;,
    caption = &quot;Source: Nicola Rennie&#39;s London Marathon R package&quot;,
  )+
  theme_minimal()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
</div>
